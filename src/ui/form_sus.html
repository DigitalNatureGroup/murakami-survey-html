<h2>SUS システム使用性尺度</h2>

<p>以下の10個の質問について、システムの使いやすさを5段階で評価してください。各質問は独立しており、前の回答に影響されないでください。</p>

<div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 20px 0; font-size: 0.9em; color: #666;">
  <strong>参考:</strong> Brooke, J. (1996) "SUS: A 'Quick and Dirty' Usability Scale" 準拠
</div>

<form id="susForm">
  <!-- 質問1 -->
  <div class="form-item">
    <label for="q1">
      1. このシステムを使うつもりだと思う
    </label>
    <div class="likert-scale">
      <div class="likert-option">
        <input type="radio" id="q1_1" name="q1" value="1" required>
        <label for="q1_1">全くそう思わない</label>
      </div>
      <div class="likert-option">
        <input type="radio" id="q1_2" name="q1" value="2" required>
        <label for="q1_2">そう思わない</label>
      </div>
      <div class="likert-option">
        <input type="radio" id="q1_3" name="q1" value="3" required>
        <label for="q1_3">どちらでもない</label>
      </div>
      <div class="likert-option">
        <input type="radio" id="q1_4" name="q1" value="4" required>
        <label for="q1_4">そう思う</label>
      </div>
      <div class="likert-option">
        <input type="radio" id="q1_5" name="q1" value="5" required>
        <label for="q1_5">とてもそう思う</label>
      </div>
    </div>
  </div>

  <!-- 質問2 -->
  <div class="form-item">
    <label for="q2">
      2. このシステムは複雑すぎる
    </label>
    <div class="likert-scale">
      <div class="likert-option">
        <input type="radio" id="q2_1" name="q2" value="1" required>
        <label for="q2_1">全くそう思わない</label>
      </div>
      <div class="likert-option">
        <input type="radio" id="q2_2" name="q2" value="2" required>
        <label for="q2_2">そう思わない</label>
      </div>
      <div class="likert-option">
        <input type="radio" id="q2_3" name="q2" value="3" required>
        <label for="q2_3">どちらでもない</label>
      </div>
      <div class="likert-option">
        <input type="radio" id="q2_4" name="q2" value="4" required>
        <label for="q2_4">そう思う</label>
      </div>
      <div class="likert-option">
        <input type="radio" id="q2_5" name="q2" value="5" required>
        <label for="q2_5">とてもそう思う</label>
      </div>
    </div>
  </div>

  <!-- 質問3 -->
  <div class="form-item">
    <label for="q3">
      3. このシステムは使いやすい
    </label>
    <div class="likert-scale">
      <div class="likert-option">
        <input type="radio" id="q3_1" name="q3" value="1" required>
        <label for="q3_1">全くそう思わない</label>
      </div>
      <div class="likert-option">
        <input type="radio" id="q3_2" name="q3" value="2" required>
        <label for="q3_2">そう思わない</label>
      </div>
      <div class="likert-option">
        <input type="radio" id="q3_3" name="q3" value="3" required>
        <label for="q3_3">どちらでもない</label>
      </div>
      <div class="likert-option">
        <input type="radio" id="q3_4" name="q3" value="4" required>
        <label for="q3_4">そう思う</label>
      </div>
      <div class="likert-option">
        <input type="radio" id="q3_5" name="q3" value="5" required>
        <label for="q3_5">とてもそう思う</label>
      </div>
    </div>
  </div>

  <!-- 質問4 -->
  <div class="form-item">
    <label for="q4">
      4. このシステムを使うには技術的なサポートが必要だ
    </label>
    <div class="likert-scale">
      <div class="likert-option">
        <input type="radio" id="q4_1" name="q4" value="1" required>
        <label for="q4_1">全くそう思わない</label>
      </div>
      <div class="likert-option">
        <input type="radio" id="q4_2" name="q4" value="2" required>
        <label for="q4_2">そう思わない</label>
      </div>
      <div class="likert-option">
        <input type="radio" id="q4_3" name="q4" value="3" required>
        <label for="q4_3">どちらでもない</label>
      </div>
      <div class="likert-option">
        <input type="radio" id="q4_4" name="q4" value="4" required>
        <label for="q4_4">そう思う</label>
      </div>
      <div class="likert-option">
        <input type="radio" id="q4_5" name="q4" value="5" required>
        <label for="q4_5">とてもそう思う</label>
      </div>
    </div>
  </div>

  <!-- 質問5 -->
  <div class="form-item">
    <label for="q5">
      5. このシステムの機能はよく統合されている
    </label>
    <div class="likert-scale">
      <div class="likert-option">
        <input type="radio" id="q5_1" name="q5" value="1" required>
        <label for="q5_1">全くそう思わない</label>
      </div>
      <div class="likert-option">
        <input type="radio" id="q5_2" name="q5" value="2" required>
        <label for="q5_2">そう思わない</label>
      </div>
      <div class="likert-option">
        <input type="radio" id="q5_3" name="q5" value="3" required>
        <label for="q5_3">どちらでもない</label>
      </div>
      <div class="likert-option">
        <input type="radio" id="q5_4" name="q5" value="4" required>
        <label for="q5_4">そう思う</label>
      </div>
      <div class="likert-option">
        <input type="radio" id="q5_5" name="q5" value="5" required>
        <label for="q5_5">とてもそう思う</label>
      </div>
    </div>
  </div>

  <!-- 質問6 -->
  <div class="form-item">
    <label for="q6">
      6. このシステムには不整合がある
    </label>
    <div class="likert-scale">
      <div class="likert-option">
        <input type="radio" id="q6_1" name="q6" value="1" required>
        <label for="q6_1">全くそう思わない</label>
      </div>
      <div class="likert-option">
        <input type="radio" id="q6_2" name="q6" value="2" required>
        <label for="q6_2">そう思わない</label>
      </div>
      <div class="likert-option">
        <input type="radio" id="q6_3" name="q6" value="3" required>
        <label for="q6_3">どちらでもない</label>
      </div>
      <div class="likert-option">
        <input type="radio" id="q6_4" name="q6" value="4" required>
        <label for="q6_4">そう思う</label>
      </div>
      <div class="likert-option">
        <input type="radio" id="q6_5" name="q6" value="5" required>
        <label for="q6_5">とてもそう思う</label>
      </div>
    </div>
  </div>

  <!-- 質問7 -->
  <div class="form-item">
    <label for="q7">
      7. このシステムは使い方を覚えやすい
    </label>
    <div class="likert-scale">
      <div class="likert-option">
        <input type="radio" id="q7_1" name="q7" value="1" required>
        <label for="q7_1">全くそう思わない</label>
      </div>
      <div class="likert-option">
        <input type="radio" id="q7_2" name="q7" value="2" required>
        <label for="q7_2">そう思わない</label>
      </div>
      <div class="likert-option">
        <input type="radio" id="q7_3" name="q7" value="3" required>
        <label for="q7_3">どちらでもない</label>
      </div>
      <div class="likert-option">
        <input type="radio" id="q7_4" name="q7" value="4" required>
        <label for="q7_4">そう思う</label>
      </div>
      <div class="likert-option">
        <input type="radio" id="q7_5" name="q7" value="5" required>
        <label for="q7_5">とてもそう思う</label>
      </div>
    </div>
  </div>

  <!-- 質問8 -->
  <div class="form-item">
    <label for="q8">
      8. このシステムは使いにくい
    </label>
    <div class="likert-scale">
      <div class="likert-option">
        <input type="radio" id="q8_1" name="q8" value="1" required>
        <label for="q8_1">全くそう思わない</label>
      </div>
      <div class="likert-option">
        <input type="radio" id="q8_2" name="q8" value="2" required>
        <label for="q8_2">そう思わない</label>
      </div>
      <div class="likert-option">
        <input type="radio" id="q8_3" name="q8" value="3" required>
        <label for="q8_3">どちらでもない</label>
      </div>
      <div class="likert-option">
        <input type="radio" id="q8_4" name="q8" value="4" required>
        <label for="q8_4">そう思う</label>
      </div>
      <div class="likert-option">
        <input type="radio" id="q8_5" name="q8" value="5" required>
        <label for="q8_5">とてもそう思う</label>
      </div>
    </div>
  </div>

  <!-- 質問9 -->
  <div class="form-item">
    <label for="q9">
      9. このシステムは信頼できる
    </label>
    <div class="likert-scale">
      <div class="likert-option">
        <input type="radio" id="q9_1" name="q9" value="1" required>
        <label for="q9_1">全くそう思わない</label>
      </div>
      <div class="likert-option">
        <input type="radio" id="q9_2" name="q9" value="2" required>
        <label for="q9_2">そう思わない</label>
      </div>
      <div class="likert-option">
        <input type="radio" id="q9_3" name="q9" value="3" required>
        <label for="q9_3">どちらでもない</label>
      </div>
      <div class="likert-option">
        <input type="radio" id="q9_4" name="q9" value="4" required>
        <label for="q9_4">そう思う</label>
      </div>
      <div class="likert-option">
        <input type="radio" id="q9_5" name="q9" value="5" required>
        <label for="q9_5">とてもそう思う</label>
      </div>
    </div>
  </div>

  <!-- 質問10 -->
  <div class="form-item">
    <label for="q10">
      10. このシステムを使い始める前に多くのことを学ぶ必要がある
    </label>
    <div class="likert-scale">
      <div class="likert-option">
        <input type="radio" id="q10_1" name="q10" value="1" required>
        <label for="q10_1">全くそう思わない</label>
      </div>
      <div class="likert-option">
        <input type="radio" id="q10_2" name="q10" value="2" required>
        <label for="q10_2">そう思わない</label>
      </div>
      <div class="likert-option">
        <input type="radio" id="q10_3" name="q10" value="3" required>
        <label for="q10_3">どちらでもない</label>
      </div>
      <div class="likert-option">
        <input type="radio" id="q10_4" name="q10" value="4" required>
        <label for="q10_4">そう思う</label>
      </div>
      <div class="likert-option">
        <input type="radio" id="q10_5" name="q10" value="5" required>
        <label for="q10_5">とてもそう思う</label>
      </div>
    </div>
  </div>
</form>

<!-- 回答確認エリア -->
<div id="answerSummary" style="display: none; background: #e8f5e8; padding: 15px; border-radius: 8px; margin: 20px 0;">
  <h3 style="margin-top: 0; color: #2e7d32;">📊 回答確認</h3>
  <div id="summaryContent"></div>
  <div id="susScore" style="margin-top: 15px; padding: 10px; background: white; border-radius: 4px; text-align: center;">
    <strong>SUS スコア: <span id="scoreValue">-</span></strong>
  </div>
</div>

<script>
  // 回答データを収集する関数（レイアウトから呼び出される）
  window.collectAnswers = function() {
    const form = document.getElementById('susForm');
    const formData = new FormData(form);
    const answers = {};
    
    // 各フィールドの値を取得
    for (const [key, value] of formData) {
      answers[key] = parseInt(value);
    }
    
    // 回答の妥当性チェック
    const requiredFields = ['q1', 'q2', 'q3', 'q4', 'q5', 'q6', 'q7', 'q8', 'q9', 'q10'];
    for (const field of requiredFields) {
      if (!answers[field] && answers[field] !== 0) {
        throw new Error(`質問${field.slice(1)}の回答が不足しています`);
      }
    }
    
    return answers;
  };
  
  // ページ読み込み時の処理
  window.onPageLoad = function() {
    console.log('SUS アンケートが読み込まれました');
    
    // ラジオボタンの変更時に回答確認を表示
    const radioButtons = document.querySelectorAll('input[type="radio"]');
    radioButtons.forEach(radio => {
      radio.addEventListener('change', updateAnswerSummary);
    });
    
    // 初期表示
    updateAnswerSummary();
  };
  
  // 回答確認の更新
  function updateAnswerSummary() {
    const summaryDiv = document.getElementById('answerSummary');
    const contentDiv = document.getElementById('summaryContent');
    const scoreDiv = document.getElementById('susScore');
    const scoreValue = document.getElementById('scoreValue');
    
    if (!summaryDiv || !contentDiv) return;
    
    const answers = {};
    const labels = {
      q1: 'このシステムを使うつもりだと思う',
      q2: 'このシステムは複雑すぎる',
      q3: 'このシステムは使いやすい',
      q4: 'このシステムを使うには技術的なサポートが必要だ',
      q5: 'このシステムの機能はよく統合されている',
      q6: 'このシステムには不整合がある',
      q7: 'このシステムは使い方を覚えやすい',
      q8: 'このシステムは使いにくい',
      q9: 'このシステムは信頼できる',
      q10: 'このシステムを使い始める前に多くのことを学ぶ必要がある'
    };
    
    // 各質問の値を取得
    for (const [key, label] of Object.entries(labels)) {
      const radio = document.querySelector(`input[name="${key}"]:checked`);
      if (radio) {
        answers[key] = parseInt(radio.value);
      }
    }
    
    // 回答確認の表示
    let summaryHtml = '<div style="display: grid; grid-template-columns: 1fr; gap: 8px;">';
    for (const [key, value] of Object.entries(answers)) {
      const questionNumber = key.slice(1);
      summaryHtml += `
        <div style="background: white; padding: 8px; border-radius: 4px; border-left: 3px solid #667eea;">
          <strong>Q${questionNumber}:</strong> ${labels[key]} → <span style="color: #667eea; font-weight: bold;">${value}</span>
        </div>
      `;
    }
    summaryHtml += '</div>';
    
    contentDiv.innerHTML = summaryHtml;
    
    // SUS スコアの計算（すべての質問に回答済みの場合）
    if (Object.keys(answers).length === 10) {
      const susScore = calculateSUSScore(answers);
      scoreValue.textContent = susScore.toFixed(1);
      scoreDiv.style.display = 'block';
    } else {
      scoreDiv.style.display = 'none';
    }
    
    summaryDiv.style.display = 'block';
  }
  
  // SUS スコアの計算
  function calculateSUSScore(answers) {
    // 奇数の質問（1,3,5,7,9）はそのまま、偶数の質問（2,4,6,8,10）は逆転
    let total = 0;
    
    for (let i = 1; i <= 10; i++) {
      const key = `q${i}`;
      let score = answers[key];
      
      if (i % 2 === 0) {
        // 偶数の質問は逆転（5→1, 4→2, 3→3, 2→4, 1→5）
        score = 6 - score;
      }
      
      total += score - 1; // 0-4のスケールに変換
    }
    
    // 2.5を掛けて0-100のスケールに変換
    return total * 2.5;
  }
</script>

<style>
  /* SUS 専用スタイル */
  .form-item {
    margin: 25px 0;
    padding: 20px;
    border: 1px solid #e9ecef;
    border-radius: 8px;
    background: white;
  }
  
  .form-item label {
    font-weight: bold;
    display: block;
    margin-bottom: 15px;
    color: #333;
    font-size: 1.1em;
    line-height: 1.4;
  }
  
  .likert-scale {
    display: flex;
    justify-content: space-between;
    margin-top: 15px;
    gap: 10px;
  }
  
  .likert-option {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    flex: 1;
  }
  
  .likert-option input[type="radio"] {
    margin-bottom: 8px;
    transform: scale(1.2);
  }
  
  .likert-option label {
    font-size: 0.85em;
    color: #666;
    line-height: 1.3;
    font-weight: normal;
    margin-bottom: 0;
  }
  
  /* ラジオボタンのカスタマイズ */
  input[type="radio"] {
    accent-color: #667eea;
  }
  
  /* レスポンシブ対応 */
  @media (max-width: 768px) {
    .likert-scale {
      flex-direction: column;
      gap: 15px;
    }
    
    .likert-option {
      flex-direction: row;
      text-align: left;
      gap: 10px;
    }
    
    .likert-option input[type="radio"] {
      margin-bottom: 0;
    }
  }
</style>
